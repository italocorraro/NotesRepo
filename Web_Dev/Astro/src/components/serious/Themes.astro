---
import { Image } from "astro:assets";

const light = 'Tema Chiaro';
const dark = 'Tema Scuro';
const drac = 'Tema Dracula';
const sist = 'Tema Predefinito';
---

<aside aria-labelledby="site-settings">
    <h2 id="site-settings">Impostazioni Tema</h2>
    <!-- Impostazioni TEMA SHIKI -->
    <form id="shiki-theme-settings" class="astro-code">
        <input type="radio" name="shiki-theme" id="shiki-light" value="light">
        <label for="shiki-light" title={light}>
            <span class="text-only">{light}</span>
            <svg width="60" height="60" viewBox="0 0 100 100" aria-hidden="true">
  <!-- Disco centrale -->
  <circle cx="50" cy="50" r="22" fill="var(--shiki-light)" />
  
  <!-- Raggi -->
  <g stroke="var(--shiki-light)" stroke-width="8" stroke-linecap="round">
    <line x1="50" y1="6"  x2="50" y2="22" />
    <line x1="50" y1="78" x2="50" y2="94" />
    <line x1="6"  y1="50" x2="22" y2="50" />
    <line x1="78" y1="50" x2="94" y2="50" />
    <line x1="21" y1="21" x2="32" y2="32" />
    <line x1="78" y1="78" x2="67" y2="67" />
    <line x1="21" y1="79" x2="32" y2="68" />
    <line x1="79" y1="21" x2="68" y2="32" />
  </g>
</svg>

        </label>

        <input type="radio" name="shiki-theme" id="shiki-dark" value="dark">
        <label for="shiki-dark" title={dark}>
            <span class="text-only">{dark}</span>
        <svg width="60" height="60" viewBox="0 0 100 100" aria-hidden="true">
  <!-- Disco completo -->
  <circle cx="50" cy="50" r="40" fill="var(--shiki-dark-code)" opacity="0.25" />
  
  <!-- Falce luminosa (più larga rispetto alla versione precedente) -->
  <path d="M45 10
           A40 40 0 1 0 45 90
           A28 40 0 1 1 45 10Z"
        fill="var(--shiki-dark)" />
</svg>

        </label>

        <input type="radio" name="shiki-theme" id="shiki-dracula" value="dracula">
        <label for="shiki-dracula" title={drac}>
            <span class="text-only">{drac}</span>
            <Image decoding="sync" loading="eager" src="https://user-images.githubusercontent.com/33915497/214760369-5c078b43-fdab-4cdd-adfe-ad905a64b5a5.png" alt="logo tema Dracula da GitHub" width=60 height=60 />
        </label>

        <input type="radio" name="shiki-theme" id="shiki-system" value="" checked>
        <label for="shiki-system" title={sist}><span class="text-only">{sist}</span>
            <svg width="48" height="48" viewBox="0 0 24 24" aria-hidden="true">
  <!-- Mezzo sole a sinistra -->
  <g fill="var(--font-color)">
    <!-- Semicerchio del sole -->
    <path d="M12 4a8 8 0 0 0 0 16V4z"/>
  </g>

  <!-- Mezzo cerchio scuro a destra -->
  <path fill="var(--font-color)" d="M12 4a8 8 0 1 1 0 16V4z" opacity="0.4"/>
</svg>

        </label>
    </form>
</aside>

<script>
    // radio setting script
    const THEME = 'my-notes-repo-theme';
    const currentTheme = sessionStorage.getItem(THEME);
    const root = document.documentElement;
    const shikiRadios = document.querySelectorAll('#shiki-theme-settings > [type="radio"]');

    // Setting current theme from session storage
    if(currentTheme && typeof currentTheme === 'string') {
        root.setAttribute('data-theme', currentTheme);
    }

    // Setting theme on radio input
    shikiRadios.forEach((shiki) => {
        if(shiki.id === 'shiki-system') {
            shiki.addEventListener('input', () => {
                root.removeAttribute('data-theme'); 
                sessionStorage.removeItem(THEME)
            });
        } else {
            const theme = shiki.getAttribute('value');
            theme == currentTheme ? shiki.setAttribute('checked','true') : null;
            shiki.addEventListener('input', () => {
                if(theme && typeof theme === 'string') {
                    root.setAttribute('data-theme', theme);
                    sessionStorage.setItem(THEME, theme);
                }
            });
        }
    });
  
    
</script>

<!-- <header role="banner">
  
  <div class="logo">
    <h1>Documentazione Astro</h1>
  </div>

  
  <button aria-expanded="false" aria-controls="mainNav" id="toggleNav">
    ☰ Menu
  </button>

  
  <nav id="mainNav" role="navigation" hidden>
    <ul>
      <li><a href="#intro">Introduzione</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#plugins">Plugin</a></li>
      <li><a href="#accessibility">Accessibilità</a></li>
    </ul>
  </nav>

  
  <aside role="complementary" aria-labelledby="settingsTitle">
    <h2 id="settingsTitle">Impostazioni</h2>
    <form aria-describedby="settingsDesc">
      <p id="settingsDesc">Seleziona le preferenze di visualizzazione:</p>

      
      <fieldset>
        <legend>Tema</legend>
        <label>
          <input type="radio" name="theme" value="light" aria-label="Tema chiaro">
          Chiaro
        </label>
        <label>
          <input type="radio" name="theme" value="dark" aria-label="Tema scuro">
          Scuro
        </label>
      </fieldset>

      
      <fieldset>
        <legend>Dimensione testo</legend>
        <label>
          <input type="radio" name="fontsize" value="small" aria-label="Testo piccolo">
          Piccolo
        </label>
        <label>
          <input type="radio" name="fontsize" value="medium" aria-label="Testo medio">
          Medio
        </label>
        <label>
          <input type="radio" name="fontsize" value="large" aria-label="Testo grande">
          Grande
        </label>
      </fieldset>
    </form>
  </aside>

 
 -->